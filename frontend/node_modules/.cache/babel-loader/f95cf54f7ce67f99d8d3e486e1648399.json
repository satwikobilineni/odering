{"ast":null,"code":"import { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, vModelText as _vModelText, withDirectives as _withDirectives, vModelRadio as _vModelRadio, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-47c45a2c\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"checkout-container\"\n};\nconst _hoisted_2 = {\n  class: \"checkout-form-container\"\n};\nconst _hoisted_3 = {\n  class: \"checkout-heading\"\n};\nconst _hoisted_4 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h3\", null, [/*#__PURE__*/_createTextVNode(\"Few more step to place your order\"), /*#__PURE__*/_createElementVNode(\"span\", null, \"Total\")], -1 /* HOISTED */));\nconst _hoisted_5 = {\n  key: 0\n};\nconst _hoisted_6 = {\n  class: \"form-group details-group\"\n};\nconst _hoisted_7 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h4\", null, \"Shipping Details\", -1 /* HOISTED */));\nconst _hoisted_8 = {\n  class: \"form-group\"\n};\nconst _hoisted_9 = {\n  key: 0,\n  class: \"error-mess\"\n};\nconst _hoisted_10 = {\n  class: \"form-group\"\n};\nconst _hoisted_11 = {\n  key: 0,\n  class: \"error-mess\"\n};\nconst _hoisted_12 = {\n  class: \"form-group details-group\"\n};\nconst _hoisted_13 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h4\", null, \"Payment Method\", -1 /* HOISTED */));\nconst _hoisted_14 = {\n  class: \"form-group\"\n};\nconst _hoisted_15 = {\n  class: \"form-group\"\n};\nconst _hoisted_16 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", null, \"Cash\", -1 /* HOISTED */));\nconst _hoisted_17 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", null, \"Card (Visa)\", -1 /* HOISTED */));\nconst _hoisted_18 = {\n  key: 0,\n  class: \"error-mess\"\n};\nconst _hoisted_19 = {\n  key: 0\n};\nconst _hoisted_20 = {\n  class: \"form-group\"\n};\nconst _hoisted_21 = {\n  key: 0,\n  class: \"error-mess\"\n};\nconst _hoisted_22 = {\n  class: \"form-group\"\n};\nconst _hoisted_23 = {\n  key: 0,\n  class: \"error-mess\"\n};\nconst _hoisted_24 = {\n  class: \"form-group\"\n};\nconst _hoisted_25 = {\n  class: \"form-control\"\n};\nconst _hoisted_26 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", {\n  style: {\n    \"font-size\": \"1.6rem\",\n    \"position\": \"absolute\",\n    \"margin-left\": \"-5px\",\n    \"margin-top\": \"-11px\"\n  }\n}, \"Expiry Date: \", -1 /* HOISTED */));\nconst _hoisted_27 = {\n  key: 0,\n  class: \"error-mess\"\n};\nconst _hoisted_28 = {\n  class: \"form-group\"\n};\nconst _hoisted_29 = {\n  key: 0,\n  class: \"error-mess\"\n};\nconst _hoisted_30 = {\n  key: 0,\n  class: \"form-group\"\n};\nconst _hoisted_31 = [\"disabled\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"form\", {\n    id: \"checkoutForm\",\n    onSubmit: _cache[9] || (_cache[9] = (...args) => $options.handleSubmit && $options.handleSubmit(...args)),\n    novalidate: \"\",\n    autocomplete: \"off\"\n  }, [_createElementVNode(\"div\", _hoisted_3, [_hoisted_4, _ctx.user ? (_openBlock(), _createElementBlock(\"h3\", _hoisted_5, [_createTextVNode(_toDisplayString(_ctx.user.user_name) + \"'s Order\", 1 /* TEXT */), _createElementVNode(\"span\", null, \"$\" + _toDisplayString($options.calculateSummaryPrice()[3]), 1 /* TEXT */)])) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"div\", _hoisted_6, [_hoisted_7, _createElementVNode(\"div\", _hoisted_8, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    name: \"coPhone\",\n    id: \"coPhone\",\n    placeholder: \"Phone number\",\n    class: \"form-control\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.checkoutObj.phone = $event)\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.checkoutObj.phone]]), $data.errorObj.phoneErr.length > 0 ? (_openBlock(), _createElementBlock(\"p\", _hoisted_9, _toDisplayString($data.errorObj.phoneErr[0]), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"div\", _hoisted_10, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    name: \"coAddress\",\n    id: \"coAddress\",\n    placeholder: \"Address in Hanoi, Vietnam\",\n    class: \"form-control\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.checkoutObj.address = $event)\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.checkoutObj.address]]), $data.errorObj.addressErr.length > 0 ? (_openBlock(), _createElementBlock(\"p\", _hoisted_11, _toDisplayString($data.errorObj.addressErr[0]), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)])]), _createElementVNode(\"div\", _hoisted_12, [_hoisted_13, _createElementVNode(\"div\", _hoisted_14, [_createElementVNode(\"div\", _hoisted_15, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"radio\",\n    name: \"payment\",\n    value: \"cash\",\n    id: \"paymentCash\",\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.checkoutObj.paymentMethod = $event)\n  }, null, 512 /* NEED_PATCH */), [[_vModelRadio, $data.checkoutObj.paymentMethod]]), _hoisted_16, _withDirectives(_createElementVNode(\"input\", {\n    type: \"radio\",\n    name: \"payment\",\n    value: \"card\",\n    id: \"paymentCard\",\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $data.checkoutObj.paymentMethod = $event)\n  }, null, 512 /* NEED_PATCH */), [[_vModelRadio, $data.checkoutObj.paymentMethod]]), _hoisted_17]), $data.errorObj.payErr.length > 0 ? (_openBlock(), _createElementBlock(\"p\", _hoisted_18, _toDisplayString($data.errorObj.payErr[0]), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)]), $data.checkoutObj.paymentMethod == 'card' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_19, [_createElementVNode(\"div\", _hoisted_20, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    name: \"coCardNum\",\n    placeholder: \"Enter your card number\",\n    id: \"coCardNum\",\n    class: \"form-control\",\n    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $data.cardObj.number = $event),\n    size: \"16\",\n    maxlength: \"16\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.cardObj.number]]), $data.errorObj.numErr.length > 0 ? (_openBlock(), _createElementBlock(\"p\", _hoisted_21, _toDisplayString($data.errorObj.numErr[0]), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"div\", _hoisted_22, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    name: \"coCardName\",\n    placeholder: \"Enter the name in your card \",\n    id: \"coCardName\",\n    class: \"form-control\",\n    \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => $data.cardObj.name = $event)\n  }, null, 512 /* NEED_PATCH */), [[$setup[\"vUpcase\"]], [_vModelText, $data.cardObj.name]]), $data.errorObj.nameErr.length > 0 ? (_openBlock(), _createElementBlock(\"p\", _hoisted_23, _toDisplayString($data.errorObj.nameErr[0]), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"div\", _hoisted_24, [_createElementVNode(\"div\", _hoisted_25, [_hoisted_26, _withDirectives(_createElementVNode(\"input\", {\n    style: {\n      \"position\": \"absolute\",\n      \"margin-left\": \"100px\",\n      \"margin-top\": \"-12px\",\n      \"background\": \"inherit\"\n    },\n    type: \"month\",\n    name: \"coCardEx\",\n    id: \"coCardEx\",\n    \"onUpdate:modelValue\": _cache[6] || (_cache[6] = $event => $data.cardObj.expiryDate = $event),\n    onClick: _cache[7] || (_cache[7] = $event => $options.availableTime())\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.cardObj.expiryDate]])]), $data.errorObj.exDateErr.length > 0 ? (_openBlock(), _createElementBlock(\"p\", _hoisted_27, _toDisplayString($data.errorObj.exDateErr[0]), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"div\", _hoisted_28, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    name: \"coCardCvv\",\n    placeholder: \"CVV\",\n    id: \"coCardCvv\",\n    class: \"form-control\",\n    \"onUpdate:modelValue\": _cache[8] || (_cache[8] = $event => $data.cardObj.cvv = $event)\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.cardObj.cvv]]), $data.errorObj.cvvErr.length > 0 ? (_openBlock(), _createElementBlock(\"p\", _hoisted_29, _toDisplayString($data.errorObj.cvvErr[0]), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)])])) : _createCommentVNode(\"v-if\", true)]), _ctx.user ? (_openBlock(), _createElementBlock(\"div\", _hoisted_30, [_createElementVNode(\"input\", {\n    type: \"submit\",\n    value: \"CONFIRM & PAY\",\n    class: \"btn\",\n    disabled: $options.filterFoods.length ? false : true\n  }, null, 8 /* PROPS */, _hoisted_31)])) : _createCommentVNode(\"v-if\", true)], 32 /* HYDRATE_EVENTS */)])]);\n}","map":{"version":3,"mappings":"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","names":["class","_createElementVNode","style","_createElementBlock","_hoisted_1","_hoisted_2","id","onSubmit","$options","novalidate","autocomplete","_hoisted_3","_hoisted_4","_ctx","user_name","_hoisted_6","_hoisted_7","_hoisted_8","type","name","placeholder","$data","phone","phoneErr","length","_hoisted_9","_hoisted_10","address","addressErr","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","value","paymentMethod","_hoisted_16","_hoisted_17","payErr","_hoisted_18","_hoisted_20","number","size","maxlength","numErr","_hoisted_21","_hoisted_22","nameErr","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","expiryDate","onClick","exDateErr","_hoisted_27","_hoisted_28","cvv","cvvErr","_hoisted_29","_hoisted_30","disabled"],"sourceRoot":"","sources":["C:\\Users\\satwi\\Downloads\\temp\\restaurant-ordering-system\\frontend\\src\\pages\\Checkout.vue"],"sourcesContent":["<template>\r\n    <div class=\"checkout-container\">\r\n        <div class=\"checkout-form-container\">\r\n            <form id=\"checkoutForm\" @submit=\"handleSubmit\" novalidate autocomplete=\"off\">\r\n                <div class=\"checkout-heading\">\r\n                    <h3>Few more step to place your order<span>Total</span></h3>\r\n                    <h3 v-if=\"user\">{{ user.user_name }}'s Order<span>${{ calculateSummaryPrice()[3] }}</span></h3>\r\n                </div>\r\n\r\n                <div class=\"form-group details-group\">\r\n                    <h4>Shipping Details</h4>\r\n                    <div class=\"form-group\">\r\n                        <input type=\"text\" name=\"coPhone\" id=\"coPhone\" placeholder=\"Phone number\" class=\"form-control\"\r\n                            v-model=\"checkoutObj.phone\" />\r\n                        <p class=\"error-mess\" v-if=\"errorObj.phoneErr.length > 0\">{{ errorObj.phoneErr[0] }}</p>\r\n                    </div>\r\n\r\n                    <div class=\"form-group\">\r\n                        <input type=\"text\" name=\"coAddress\" id=\"coAddress\" placeholder=\"Address in Hanoi, Vietnam\"\r\n                            class=\"form-control\" v-model=\"checkoutObj.address\" />\r\n                        <p class=\"error-mess\" v-if=\"errorObj.addressErr.length > 0\">{{ errorObj.addressErr[0] }}</p>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"form-group details-group\">\r\n                    <h4>Payment Method</h4>\r\n                    <div class=\"form-group\">\r\n                        <div class=\"form-group\">\r\n                            <input type=\"radio\" name=\"payment\" value=\"cash\" id=\"paymentCash\"\r\n                                v-model=\"checkoutObj.paymentMethod\" /><span>Cash</span>\r\n                            <input type=\"radio\" name=\"payment\" value=\"card\" id=\"paymentCard\"\r\n                                v-model=\"checkoutObj.paymentMethod\" /><span>Card (Visa)</span>\r\n                        </div>\r\n                        <p class=\"error-mess\" v-if=\"errorObj.payErr.length > 0\">{{ errorObj.payErr[0] }}</p>\r\n                    </div>\r\n\r\n\r\n                    <div v-if=\"checkoutObj.paymentMethod == 'card'\">\r\n                        <div class=\"form-group\">\r\n                            <input type=\"text\" name=\"coCardNum\" placeholder=\"Enter your card number\" id=\"coCardNum\"\r\n                                class=\"form-control\" v-model=\"cardObj.number\" size=\"16\" maxlength=\"16\" />\r\n                            <p class=\"error-mess\" v-if=\"errorObj.numErr.length > 0\">{{ errorObj.numErr[0] }}</p>\r\n                        </div>\r\n\r\n                        <div class=\"form-group\">\r\n                            <input v-upcase type=\"text\" name=\"coCardName\" placeholder=\"Enter the name in your card \"\r\n                                id=\"coCardName\" class=\"form-control\" v-model=\"cardObj.name\" />\r\n                            <p class=\"error-mess\" v-if=\"errorObj.nameErr.length > 0\">{{ errorObj.nameErr[0] }}</p>\r\n                        </div>\r\n\r\n                        <div class=\"form-group\">\r\n                            <div class=\"form-control\">\r\n                                <span\r\n                                    style=\"font-size: 1.6rem; position: absolute; margin-left: -5px; margin-top: -11px;\">Expiry\r\n                                    Date:\r\n                                </span>\r\n                                <input\r\n                                    style=\"position: absolute; margin-left: 100px; margin-top: -12px; background: inherit;\"\r\n                                    type=\"month\" name=\"coCardEx\" id=\"coCardEx\" v-model=\"cardObj.expiryDate\"\r\n                                    @click=\"availableTime()\" />\r\n                            </div>\r\n                            <p class=\"error-mess\" v-if=\"errorObj.exDateErr.length > 0\">{{ errorObj.exDateErr[0] }}</p>\r\n                        </div>\r\n\r\n                        <div class=\"form-group\">\r\n                            <input type=\"text\" name=\"coCardCvv\" placeholder=\"CVV\" id=\"coCardCvv\" class=\"form-control\"\r\n                                v-model=\"cardObj.cvv\" />\r\n                            <p class=\"error-mess\" v-if=\"errorObj.cvvErr.length > 0\">{{ errorObj.cvvErr[0] }}</p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div v-if=\"user\" class=\"form-group\">\r\n                    <input type=\"submit\" value=\"CONFIRM & PAY\" class=\"btn\"\r\n                        :disabled=\"filterFoods.length ? false : true\" />\r\n                </div>\r\n            </form>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport { mapState } from \"vuex\";\r\nexport default {\r\n    name: \"Checkout\",\r\n\r\n    data() {\r\n        return {\r\n            checkoutObj: { phone: \"\", address: \"\", paymentMethod: \"\" },\r\n            cardObj: { number: \"\", name: \"\", expiryDate: \"\", cvv: \"\" },\r\n            errorObj: { phoneErr: [], addressErr: [], payErr: [], numErr: [], nameErr: [], exDateErr: [], cvvErr: [] },\r\n            cartItem: [],\r\n            itemQuantity: [],\r\n        }\r\n    },\r\n\r\n    created() {\r\n        this.getAllCartItem();\r\n    },\r\n\r\n    computed: {\r\n        ...mapState([\"allFoods\", \"user\"]),\r\n\r\n        filterFoods: function () {\r\n            return this.allFoods.filter(\r\n                (f) => this.matchID(f, this.cartItem)\r\n            );\r\n        },\r\n    },\r\n\r\n    methods: {\r\n        availableTime: function () {\r\n            var now = new Date();\r\n            var currentMonth = (\"0\" + (now.getMonth() + 1)).slice(-2);\r\n\r\n            var minRange = now.getFullYear() + \"-\" + currentMonth;\r\n            var maxRange = (now.getFullYear() + 10) + \"-\" + currentMonth;\r\n\r\n            document.getElementById(\"coCardEx\").setAttribute(\"min\", minRange);\r\n            document.getElementById(\"coCardEx\").setAttribute(\"max\", maxRange);\r\n        },\r\n\r\n        matchID: function (food, cartArray) {\r\n            let temp = \"\";\r\n            cartArray.forEach(element => {\r\n                if (parseInt(food.food_id) == element) {\r\n                    temp = food\r\n                }\r\n            });\r\n            return temp\r\n        },\r\n\r\n        calculateSummaryPrice: function () {\r\n            let subtotal = 0;\r\n            let discount = 0;\r\n            let delivery = 15;\r\n            let i = 0;\r\n            while (i < this.itemQuantity.length) {\r\n                subtotal = subtotal + parseInt(this.filterFoods[i].food_price) * this.itemQuantity[i]\r\n                discount = discount + parseInt(this.filterFoods[i].food_discount) * this.itemQuantity[i]\r\n                i = i + 1\r\n            }\r\n            if (!this.filterFoods.length) {\r\n                delivery = 0\r\n            }\r\n            let total = subtotal - discount + delivery;\r\n            return [subtotal, discount, delivery, total];\r\n        },\r\n\r\n        async getAllCartItem() {\r\n            if (this.user) {\r\n                let existItem = await axios.get('/cartItem/' + this.user.user_id);\r\n                existItem.data.forEach(element => {\r\n                    this.cartItem.push(element.food_id);\r\n                    this.itemQuantity.push(element.item_qty);\r\n                });\r\n            }\r\n        },\r\n\r\n        resetCheckErr: function () {\r\n            this.errorObj.phoneErr = [];\r\n            this.errorObj.addressErr = [];\r\n            this.errorObj.payErr = [];\r\n            this.errorObj.numErr = [];\r\n            this.errorObj.nameErr = [];\r\n            this.errorObj.exDateErr = [];\r\n            this.errorObj.cvvErr = [];\r\n        },\r\n\r\n        checkEmptyErr: function () {\r\n            for (var typeErr in this.errorObj) {\r\n                if (this.errorObj[typeErr].length != 0) {\r\n                    return false;\r\n                }\r\n            }\r\n            return true;\r\n        },\r\n\r\n        inputUpcase: function (e) {\r\n            e.target.value = e.target.value.toUpperCase()\r\n        },\r\n\r\n        checkForm: function () {\r\n            this.resetCheckErr();\r\n\r\n            // Phone validate\r\n            if (!this.checkoutObj.phone) {\r\n                this.errorObj.phoneErr.push('Entering phone number is required');\r\n            }\r\n            else {\r\n                if (!this.checkoutObj.phone.startsWith('84')) {\r\n                    this.errorObj.phoneErr.push('Phone numbers must start with 84');\r\n                }\r\n\r\n                if (this.checkoutObj.phone.length != 11) {\r\n                    this.errorObj.phoneErr.push('Phone numbers must have exactly 11 digits');\r\n                }\r\n\r\n                if (!/[0-9]{11}/.test(this.checkoutObj.phone)) {\r\n                    this.errorObj.phoneErr.push('Phone numbers can only contain numbers');\r\n                }\r\n            }\r\n\r\n            // Address validate\r\n            if (!this.checkoutObj.address) {\r\n                this.errorObj.addressErr.push('Entering address is required');\r\n            }\r\n\r\n            // Card validate\r\n            if (!this.checkoutObj.paymentMethod) {\r\n                this.errorObj.payErr.push('Selecting payment method is required');\r\n            }\r\n            else if (this.checkoutObj.paymentMethod == \"card\") {\r\n                if (!this.cardObj.number) {\r\n                    this.errorObj.numErr.push('Entering card number is required');\r\n                }\r\n                else {\r\n                    if (!this.cardObj.number.startsWith('4')) {\r\n                        this.errorObj.numErr.push('Visa card numbers must start with 4');\r\n                    }\r\n\r\n                    if (this.cardObj.number.length != 16) {\r\n                        this.errorObj.numErr.push('Visa card numbers must have exactly 16 digits');\r\n                    }\r\n\r\n                    if (!/[0-9]{16}/.test(this.cardObj.number)) {\r\n                        this.errorObj.numErr.push('Visa card numbers can only contain numbers');\r\n                    }\r\n                }\r\n\r\n                if (!this.cardObj.name) {\r\n                    this.errorObj.nameErr.push('Entering name is required');\r\n                }\r\n                else {\r\n                    if (!/^[A-Za-z]+$/.test(this.cardObj.name.replace(/\\s/g, \"\"))) {\r\n                        this.errorObj.nameErr.push('A name can only contain letters');\r\n                    }\r\n                }\r\n\r\n                if (!this.cardObj.expiryDate) {\r\n                    this.errorObj.exDateErr.push('Entering expiry date is required');\r\n                }\r\n\r\n\r\n                if (!this.cardObj.cvv) {\r\n                    this.errorObj.cvvErr.push('Entering cvv code is required');\r\n                }\r\n                else {\r\n                    if (this.cardObj.cvv.length != 3) {\r\n                        this.errorObj.cvvErr.push('Cvv code must have exactly 3 digits');\r\n                    }\r\n\r\n                    if (!/[0-9]{3}/.test(this.cardObj.cvv)) {\r\n                        this.errorObj.cvvErr.push('Cvv code can only contain numbers');\r\n                    }\r\n                }\r\n            } else if (this.checkoutObj.paymentMethod == \"cash\") {\r\n                this.cardObj.number = \"\";\r\n                this.cardObj.name = \"\";\r\n                this.cardObj.expiryDate = \"\";\r\n                this.cardObj.cvv = \"\";\r\n\r\n                this.errorObj.numErr = [];\r\n                this.errorObj.nameErr = [];\r\n                this.errorObj.exDateErr = [];\r\n                this.errorObj.cvvErr = [];\r\n            }\r\n        },\r\n\r\n        isPaid: function () {\r\n            if (this.checkoutObj.paymentMethod == \"cash\") {\r\n                return \"false\"\r\n            }\r\n            else if (this.checkoutObj.paymentMethod == \"card\") {\r\n                return \"true\"\r\n            }\r\n        },\r\n\r\n        async sendBillDetails(billId, foodId, qty) {\r\n            let billDetails = {\r\n                bill_id: parseInt(billId),\r\n                food_id: parseInt(foodId),\r\n                item_qty: parseInt(qty)\r\n            }\r\n\r\n            await axios.post(\"/billdetails\", billDetails);\r\n        },\r\n\r\n        async handleSubmit(e) {\r\n            this.checkForm();\r\n\r\n            if (!this.checkEmptyErr()) {\r\n                e.preventDefault();\r\n            } else {\r\n                e.preventDefault();\r\n                let billId = (await axios.get(\"/billstatus/new\")).data;\r\n\r\n                if (billId == \"\") {\r\n                    billId = 1\r\n                } else {\r\n                    billId = parseInt(billId.bill_id) + 1\r\n                }\r\n\r\n                this.cartItem.forEach((foodId, index) => {\r\n                    this.sendBillDetails(billId, foodId, this.itemQuantity[index])\r\n                });\r\n\r\n                var now = new Date();\r\n                var day = (\"0\" + now.getDate()).slice(-2);\r\n                var month = (\"0\" + (now.getMonth() + 1)).slice(-2);\r\n                var hour = (\"0\" + (now.getHours())).slice(-2);\r\n                var min = (\"0\" + (now.getMinutes())).slice(-2);\r\n                var currentTime = now.getFullYear() + \"-\" + month + \"-\" + day + \"T\" + hour + \":\" + min;\r\n\r\n                let billStatus = {\r\n                    bill_id: parseInt(billId),\r\n                    user_id: parseInt(this.user.user_id),\r\n                    bill_phone: this.checkoutObj.phone,\r\n                    bill_address: this.checkoutObj.address,\r\n                    bill_when: currentTime,\r\n                    bill_method: this.checkoutObj.paymentMethod,\r\n                    bill_discount: parseInt(this.calculateSummaryPrice()[1]),\r\n                    bill_delivery: parseInt(this.calculateSummaryPrice()[2]),\r\n                    bill_total: parseInt(this.calculateSummaryPrice()[3]),\r\n                    bill_paid: this.isPaid(),\r\n                    bill_status: 1\r\n                }\r\n\r\n                axios.post(\"/billstatus\", billStatus);\r\n                axios.delete(\"/cartItem/\" + this.user.user_id);\r\n\r\n                this.cartItem = [];\r\n                this.itemQuantity = [];\r\n\r\n                this.$router.push(\"/thank\");\r\n\r\n            }\r\n        }\r\n    }\r\n};\r\n</script>\r\n\r\n<script setup>\r\n// enables v-focus in templates\r\nconst vUpcase = {\r\n    mounted(el) {\r\n        el.style.textTransform = \"uppercase\";\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.checkout-container {\r\n    padding: 2rem 9%;\r\n}\r\n\r\n.checkout-container .checkout-form-container {\r\n    background: #fff;\r\n    height: 90vh;\r\n}\r\n\r\n.checkout-container .checkout-form-container form {\r\n    position: absolute;\r\n    top: 50%;\r\n    left: 50%;\r\n    transform: translate(-50%, -42%);\r\n    max-width: 70rem;\r\n    width: 100%;\r\n    box-shadow: 0 1rem 1rem rgba(0, 0, 0, 0.05);\r\n    border: 0.1rem solid rgba(0, 0, 0, 0.2);\r\n    padding: 2rem;\r\n    border-radius: 0.5rem;\r\n    animation: fadeUp 0.4s linear;\r\n}\r\n\r\n.checkout-container .checkout-form-container form h3 {\r\n    padding-bottom: 1rem;\r\n    font-size: 2rem;\r\n    text-transform: uppercase;\r\n    color: #130f40;\r\n    margin: 0;\r\n}\r\n\r\n.checkout-container .checkout-form-container form .form-control {\r\n    margin: 0.7rem 0;\r\n    border-radius: 0.5rem;\r\n    background: #f7f7f7;\r\n    padding: 2rem 1.2rem;\r\n    font-size: 1.6rem;\r\n    color: #130f40;\r\n    text-transform: none;\r\n    width: 100%;\r\n    border: none;\r\n}\r\n\r\n.checkout-container .checkout-form-container form label {\r\n    font-size: 2rem;\r\n    margin: 0;\r\n    padding: 0;\r\n}\r\n\r\n.checkout-container .checkout-form-container form span {\r\n    font-size: 18px;\r\n    padding-left: 5px;\r\n    padding-right: 40px;\r\n}\r\n\r\n.checkout-container .checkout-form-container form .btn {\r\n    margin: 1rem 0;\r\n    width: 100%;\r\n    text-align: center;\r\n}\r\n\r\n.checkout-container .checkout-form-container form p {\r\n    padding-top: 1rem;\r\n    font-size: 1.5rem;\r\n    color: #666;\r\n    margin: 0;\r\n}\r\n\r\n.checkout-container .checkout-form-container form p a {\r\n    color: #27ae60;\r\n}\r\n\r\n.checkout-container .checkout-form-container form p a:hover {\r\n    color: #130f40;\r\n    text-decoration: underline;\r\n}\r\n\r\n.checkout-container .checkout-form-container form .form-group {\r\n    margin: 0;\r\n}\r\n\r\n.checkout-container .checkout-form-container form .form-group.details-group {\r\n    margin-top: 40px;\r\n}\r\n\r\n.checkout-container .checkout-form-container form .form-group .error-mess {\r\n    font-size: 1.5rem;\r\n    position: relative;\r\n    color: rgb(243, 47, 47);\r\n    margin: 0;\r\n    padding: 0;\r\n}\r\n\r\n.checkout-container .checkout-form-container form .checkout-heading h3 {\r\n    display: flex;\r\n    justify-content: space-between;\r\n}\r\n\r\n.checkout-container .checkout-form-container form .checkout-heading h3 span {\r\n    padding-right: 0px;\r\n    color: #f38609;\r\n}\r\n\r\n.checkout-container .checkout-form-container form .checkout-heading h3:first-of-type span {\r\n    padding-right: 0px;\r\n    color: #130f40;\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}