{"ast":null,"code":"import OrderDetails from \"@/components/OrderDetails.vue\";\nimport axios from \"axios\";\nimport { mapState } from \"vuex\";\nexport default {\n  name: 'MyOrder',\n\n  data() {\n    return {\n      avaiableStatus: [\"cancel\", \"confirmed\", \"preparing\", \"checking\", \"delivering\", \"delivered\"],\n      allBills: [],\n      showOrderDetails: false,\n      sendId: null,\n      interval: \"\"\n    };\n  },\n\n  created() {\n    this.getAllBills();\n  },\n\n  mounted: function () {\n    this.autoUpdate();\n  },\n\n  beforeUnmount() {\n    clearInterval(this.interval);\n  },\n\n  computed: { ...mapState([\"allFoods\", \"user\"]),\n    filterBills: function () {\n      return this.allBills.filter(b => b.bill_status < 6 && b.bill_status > 0);\n    }\n  },\n  methods: {\n    async getAllBills() {\n      if (this.user) {\n        this.allBills = (await axios.get('/billstatus/user/' + this.user.user_id)).data;\n      }\n    },\n\n    sendBillId: function (id) {\n      this.sendId = id;\n      this.showOrderDetails = !this.showOrderDetails;\n    },\n    closeView: function () {\n      this.showOrderDetails = !this.showOrderDetails;\n    },\n    autoUpdate: function () {\n      this.interval = setInterval(function () {\n        this.getAllBills();\n      }.bind(this), 1000);\n    }\n  },\n  components: {\n    OrderDetails\n  }\n};","map":{"version":3,"mappings":"AAsFA,OAAOA,YAAP,MAAyB,+BAAzB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,QAAT,QAAyB,MAAzB;AACA,eAAe;EACXC,IAAI,EAAE,SADK;;EAGXC,IAAI,GAAG;IACH,OAAO;MACHC,cAAc,EAAE,CAAC,QAAD,EAAW,WAAX,EAAwB,WAAxB,EAAqC,UAArC,EAAiD,YAAjD,EAA+D,WAA/D,CADb;MAEHC,QAAQ,EAAE,EAFP;MAIHC,gBAAgB,EAAE,KAJf;MAKHC,MAAM,EAAE,IALL;MAOHC,QAAQ,EAAE;IAPP,CAAP;EASH,CAbU;;EAeXC,OAAO,GAAG;IACN,KAAKC,WAAL;EACH,CAjBU;;EAmBXC,OAAO,EAAE,YAAY;IACjB,KAAKC,UAAL;EACH,CArBU;;EAuBXC,aAAa,GAAG;IACZC,aAAa,CAAC,KAAKN,QAAN,CAAb;EACH,CAzBU;;EA2BXO,QAAQ,EAAE,EACN,GAAGd,QAAQ,CAAC,CAAC,UAAD,EAAa,MAAb,CAAD,CADL;IAGNe,WAAW,EAAE,YAAY;MACrB,OAAO,KAAKX,QAAL,CAAcY,MAAd,CAAsBC,CAAD,IAAOA,CAAC,CAACC,WAAF,GAAgB,CAAhB,IAAqBD,CAAC,CAACC,WAAF,GAAgB,CAAjE,CAAP;IACH;EALK,CA3BC;EAmCXC,OAAO,EAAE;IACL,MAAMV,WAAN,GAAoB;MAChB,IAAI,KAAKW,IAAT,EAAe;QACX,KAAKhB,QAAL,GAAgB,CAAC,MAAML,KAAK,CAACsB,GAAN,CAAU,sBAAsB,KAAKD,IAAL,CAAUE,OAA1C,CAAP,EAA2DpB,IAA3E;MACJ;IACH,CALI;;IAOLqB,UAAU,EAAE,UAAUC,EAAV,EAAc;MACtB,KAAKlB,MAAL,GAAckB,EAAd;MACA,KAAKnB,gBAAL,GAAwB,CAAC,KAAKA,gBAA9B;IACH,CAVI;IAYLoB,SAAS,EAAE,YAAY;MACnB,KAAKpB,gBAAL,GAAwB,CAAC,KAAKA,gBAA9B;IACH,CAdI;IAgBLM,UAAU,EAAE,YAAY;MACpB,KAAKJ,QAAL,GAAgBmB,WAAW,CAAC,YAAY;QACpC,KAAKjB,WAAL;MACH,CAF2B,CAE1BkB,IAF0B,CAErB,IAFqB,CAAD,EAEb,IAFa,CAA3B;IAGJ;EApBK,CAnCE;EAyDXC,UAAU,EAAE;IAAE9B;EAAF;AAzDD,CAAf","names":["OrderDetails","axios","mapState","name","data","avaiableStatus","allBills","showOrderDetails","sendId","interval","created","getAllBills","mounted","autoUpdate","beforeUnmount","clearInterval","computed","filterBills","filter","b","bill_status","methods","user","get","user_id","sendBillId","id","closeView","setInterval","bind","components"],"sourceRoot":"","sources":["C:\\Users\\satwi\\Downloads\\temp\\restaurant-ordering-system\\frontend\\src\\pages\\MyOrder.vue"],"sourcesContent":["<template>\r\n    <div class=\"my-order-container\" :class=\"filterBills.length > 0 ? '' : 'fit-screen'\">\r\n        <div v-if=\"filterBills.length > 0\" class=\"my-order-cards\">\r\n            <div v-for=\"b in filterBills.slice().reverse()\" class=\"card\" :key=\"b.bill_id\">\r\n                <div class=\"card-head d-flex flex-wrap flex-sm-nowrap justify-content-between\">\r\n                    <div>\r\n                        <span>Order No - </span>\r\n                        <span>{{ b.bill_id }}</span>\r\n                    </div>\r\n                    <button @click=\"sendBillId(b.bill_id)\">show order details</button>\r\n                </div>\r\n\r\n                <div class=\"d-flex flex-wrap flex-sm-nowrap justify-content-between card-summary\">\r\n                    <div class=\"w-100 text-center py-1 px-2\"><span>Paid:</span>{{ \" \" + b.bill_paid }}\r\n                    </div>\r\n                    <div class=\"w-100 text-center py-1 px-2\"><span>Status:</span>{{ \" \" + avaiableStatus[b.bill_status]\r\n                    }}\r\n                    </div>\r\n                    <div class=\"w-100 text-center py-1 px-2\"><span>When:</span> {{ b.bill_when }}</div>\r\n                </div>\r\n                <div class=\"d-flex flex-wrap flex-sm-nowrap justify-content-between card-summary\">\r\n\r\n                    <div class=\"w-100 text-center py-1 px-2\"><span>Total:</span> ${{ b.bill_total }}</div>\r\n                    <div class=\"w-100 text-center py-1 px-2\"><span>Address:</span>{{ \" \" + b.bill_address }}\r\n                    </div>\r\n                    <div class=\"w-100 text-center py-1 px-2\"><span>Phone:</span>{{ \" \" + b.bill_phone }}\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"card-body\">\r\n                    <div class=\"steps d-flex flex-wrap flex-sm-nowrap justify-content-between\">\r\n                        <div class=\"step\" :class=\"b.bill_status >= 1 ? 'completed' : ''\">\r\n                            <div class=\"step-icon-wrap\">\r\n                                <div class=\"step-icon\"><i class=\"fa-solid fa-utensils\"></i></div>\r\n                            </div>\r\n                            <h4 class=\"step-title\">Confirmed</h4>\r\n                        </div>\r\n                        <div class=\"step\" :class=\"b.bill_status >= 2 ? 'completed' : ''\">\r\n                            <div class=\"step-icon-wrap\">\r\n                                <div class=\"step-icon\"><i class=\"fa-solid fa-fire-burner\"></i></div>\r\n                            </div>\r\n                            <h4 class=\"step-title\">Preparing</h4>\r\n                        </div>\r\n                        <div class=\"step\" :class=\"b.bill_status >= 3 ? 'completed' : ''\">\r\n                            <div class=\"step-icon-wrap\">\r\n                                <div class=\"step-icon\"><i class=\"fa-solid fa-list-check\"></i></div>\r\n                            </div>\r\n                            <h4 class=\"step-title\">Checking</h4>\r\n                        </div>\r\n                        <div class=\"step\" :class=\"b.bill_status >= 4 ? 'completed' : ''\">\r\n                            <div class=\"step-icon-wrap\">\r\n                                <div class=\"step-icon\"><i class=\"fa-solid fa-route\"></i></div>\r\n                            </div>\r\n                            <h4 class=\"step-title\">Delivering</h4>\r\n                        </div>\r\n                        <div class=\"step\" :class=\"b.bill_status >= 5 ? 'completed' : ''\">\r\n                            <div class=\"step-icon-wrap\">\r\n                                <div class=\"step-icon\"><i class=\"fa-solid fa-house\"></i></div>\r\n                            </div>\r\n                            <h4 class=\"step-title\">Delivered</h4>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n\r\n        <div v-else class=\"box-content row no-food\">\r\n            <div class=\"content\">\r\n                <h2 style=\"color: #057835fa;\">You do not have any orders yet</h2>\r\n            </div>\r\n            <div>\r\n                <img src=\"../assets/images/no-orders.png\" alt=\"\" />\r\n            </div>\r\n            <router-link class=\"btn\" to=\"/menu\">Order now!</router-link>\r\n        </div>\r\n\r\n        <OrderDetails v-if=\"showOrderDetails\" :bill=\"sendId\">\r\n            <button class=\"btn\" @click=\"closeView\">X</button>\r\n        </OrderDetails>\r\n    </div>\r\n\r\n</template>\r\n\r\n\r\n<script>\r\nimport OrderDetails from \"@/components/OrderDetails.vue\";\r\nimport axios from \"axios\";\r\nimport { mapState } from \"vuex\";\r\nexport default {\r\n    name: 'MyOrder',\r\n\r\n    data() {\r\n        return {\r\n            avaiableStatus: [\"cancel\", \"confirmed\", \"preparing\", \"checking\", \"delivering\", \"delivered\"],\r\n            allBills: [],\r\n\r\n            showOrderDetails: false,\r\n            sendId: null,\r\n\r\n            interval: \"\",\r\n        }\r\n    },\r\n\r\n    created() {\r\n        this.getAllBills();\r\n    },\r\n\r\n    mounted: function () {\r\n        this.autoUpdate();\r\n    },\r\n\r\n    beforeUnmount() {\r\n        clearInterval(this.interval)\r\n    },\r\n\r\n    computed: {\r\n        ...mapState([\"allFoods\", \"user\"]),\r\n\r\n        filterBills: function () {\r\n            return this.allBills.filter((b) => b.bill_status < 6 && b.bill_status > 0);\r\n        },\r\n    },\r\n\r\n    methods: {\r\n        async getAllBills() {\r\n            if (this.user) {\r\n                this.allBills = (await axios.get('/billstatus/user/' + this.user.user_id)).data;\r\n            }\r\n        },\r\n\r\n        sendBillId: function (id) {\r\n            this.sendId = id\r\n            this.showOrderDetails = !this.showOrderDetails;\r\n        },\r\n\r\n        closeView: function () {\r\n            this.showOrderDetails = !this.showOrderDetails;\r\n        },\r\n\r\n        autoUpdate: function () {\r\n            this.interval = setInterval(function () {\r\n                this.getAllBills();\r\n            }.bind(this), 1000);\r\n        }\r\n    },\r\n    components: { OrderDetails }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.my-order-container {\r\n    padding: 2rem 9%;\r\n    background: #fff;\r\n    height: 100%;\r\n}\r\n\r\n.my-order-container.fit-screen {\r\n    height: 90vh;\r\n}\r\n\r\n.my-order-cards {\r\n    margin-bottom: 2rem;\r\n}\r\n\r\n.card {\r\n    margin-bottom: 3px;\r\n}\r\n\r\n.card-head {\r\n    padding: 12px 0px;\r\n    color: white;\r\n    font-size: 16px;\r\n    background: #27ae60;\r\n\r\n}\r\n\r\n.card-head span:first-of-type {\r\n    margin-left: 20px;\r\n}\r\n\r\n.card-head button {\r\n    background-color: inherit;\r\n    color: white;\r\n    margin-right: 20px;\r\n    font-weight: 500;\r\n}\r\n\r\n.card-head button:hover {\r\n    color: #f38609;\r\n}\r\n\r\n.card-summary {\r\n    padding: 12px 10px;\r\n    background: #eee;\r\n    font-size: 14px;\r\n}\r\n\r\n.steps .step {\r\n    display: block;\r\n    width: 100%;\r\n    margin-bottom: 35px;\r\n    text-align: center\r\n}\r\n\r\n.steps .step .step-icon-wrap {\r\n    display: block;\r\n    position: relative;\r\n    width: 100%;\r\n    height: 80px;\r\n    text-align: center\r\n}\r\n\r\n.steps .step .step-icon-wrap::before,\r\n.steps .step .step-icon-wrap::after {\r\n    display: block;\r\n    position: absolute;\r\n    top: 50%;\r\n    width: 50%;\r\n    height: 3px;\r\n    margin-top: -1px;\r\n    background-color: #e1e7ec;\r\n    content: '';\r\n    z-index: 1\r\n}\r\n\r\n.steps .step .step-icon-wrap::before {\r\n    left: 0\r\n}\r\n\r\n.steps .step .step-icon-wrap::after {\r\n    right: 0\r\n}\r\n\r\n.steps .step .step-icon {\r\n    display: inline-block;\r\n    position: relative;\r\n    width: 80px;\r\n    height: 80px;\r\n    border: 1px solid #e1e7ec;\r\n    border-radius: 50%;\r\n    background-color: #f5f5f5;\r\n    color: #374250;\r\n    font-size: 38px;\r\n    line-height: 81px;\r\n    z-index: 5\r\n}\r\n\r\n.steps .step .step-title {\r\n    margin-top: 16px;\r\n    margin-bottom: 0;\r\n    color: #606975;\r\n    font-size: 14px;\r\n    font-weight: 500\r\n}\r\n\r\n.steps .step:first-child .step-icon-wrap::before {\r\n    display: none\r\n}\r\n\r\n.steps .step:last-child .step-icon-wrap::after {\r\n    display: none\r\n}\r\n\r\n.steps .step.completed .step-icon-wrap::before,\r\n.steps .step.completed .step-icon-wrap::after {\r\n    background-color: #0da9ef\r\n}\r\n\r\n.steps .step.completed .step-icon {\r\n    border-color: #0da9ef;\r\n    background-color: #0da9ef;\r\n    color: #fff\r\n}\r\n\r\n.no-food {\r\n    text-align: center;\r\n    justify-content: center;\r\n    display: block;\r\n    width: 100%;\r\n    height: 100%;\r\n    margin: auto;\r\n}\r\n\r\n.no-food a {\r\n    margin-top: 20px;\r\n    margin-left: -10px;\r\n}\r\n\r\n@media (max-width: 320px) {\r\n    .my-order-container {\r\n        padding: 0px;\r\n    }\r\n\r\n    .card-head {\r\n        font-size: 14px;\r\n    }\r\n\r\n    .no-food .content h2 {\r\n        font-size: 14px;\r\n    }\r\n\r\n\r\n}\r\n\r\n@media (max-width: 576px) {\r\n    .my-order-container {\r\n        padding: 1rem 4.5%;\r\n    }\r\n\r\n    .flex-sm-nowrap .step .step-icon-wrap::before,\r\n    .flex-sm-nowrap .step .step-icon-wrap::after {\r\n        display: none\r\n    }\r\n\r\n    .card {\r\n        margin-top: 20px;\r\n    }\r\n\r\n    .no-food div img {\r\n        width: 85vw;\r\n    }\r\n}\r\n\r\n@media (max-width: 768px) {\r\n\r\n    .flex-md-nowrap .step .step-icon-wrap::before,\r\n    .flex-md-nowrap .step .step-icon-wrap::after {\r\n        display: none\r\n    }\r\n}\r\n\r\n@media (max-width: 991px) {\r\n\r\n    .flex-lg-nowrap .step .step-icon-wrap::before,\r\n    .flex-lg-nowrap .step .step-icon-wrap::after {\r\n        display: none\r\n    }\r\n}\r\n\r\n@media (max-width: 1200px) {\r\n\r\n    .flex-xl-nowrap .step .step-icon-wrap::before,\r\n    .flex-xl-nowrap .step .step-icon-wrap::after {\r\n        display: none\r\n    }\r\n}\r\n\r\n.bg-faded,\r\n.bg-secondary {\r\n    background-color: #f5f5f5 !important;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}